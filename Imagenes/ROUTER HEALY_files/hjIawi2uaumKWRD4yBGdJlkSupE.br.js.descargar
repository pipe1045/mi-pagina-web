var MobileIcon;(function(){function kt(){ot()?ct("Overlap"):(n&&n.classList.remove("b_hide"),Log.Log(s,u,tt,!1,"reason","Resize"))}function ot(){return(nt===null||nt===void 0?void 0:nt.offsetWidth)-((d===null||d===void 0?void 0:d.offsetWidth)+(g===null||g===void 0?void 0:g.offsetWidth)+ut)<pt}function e(){h("ClickPage")}function st(t){t.key==="Escape"&&v&&(n&&n.focus(),h("EscapeKeydown"))}function ht(n){Log.Log("Click","MobileIcon","GetApp");Log.Log(s,u,"ClickPanel");n.stopPropagation();_w.open(f,"blank");h("ClickPanel")}function ct(t){n&&n.classList.add("b_hide");Log.Log(s,u,"HideIcon",!1,"reason",t)}function lt(t){if(!ft){dt(t);return}if(Log.Log(s,u,"ShowPanel",!1,"reason",t),_mobIconConfig.EnableQrGen&&!et&&typeof _w.QRCode=="function"&&f.length){var i=_qs("#id_mobqrimg");i&&_mobIconConfig.QrSize&&(new _w.QRCode(i,{text:f,width:_mobIconConfig.QrSize,height:_mobIconConfig.QrSize,correctLevel:1}),et=!0)}oi();ci();n&&n.classList.add("active");v=!0}function h(t){v&&(Log.Log(s,u,"HideFlyout",!1,"reason",t),si(),n&&n.classList.remove("active"),v=!1)}function dt(t){if(sj_gx&&l.length){var i=sj_gx();i.onreadystatechange=function(){i.readyState==4&&i.status==200&&(ft=!0,n===null||n===void 0?void 0:n.insertAdjacentHTML("afterend",i.responseText),sb_st(function(){lt(t)},200))};i.open("GET",l,!0);i.send()}}function gt(){var n=ti(fi("".concat(it)),wt);n&&sb_st(function(){var n;(n=c===null||c===void 0?void 0:c.classList)===null||n===void 0?void 0:n.remove("b_hide")},550)}function ni(n){return n<=0?Number.MAX_VALUE:Math.floor((Date.now()-n)/864e5)}function ti(n,t){return n<=0||ni(n)>t}function ii(n){sb_st(function(){var t;(t=_w.localStorage)===null||t===void 0?void 0:t.setItem(n,""+Date.now())},0)}function ri(n){var i,r,t;try{return a==null&&(r=_w.location.href,t=r.split("?"),t&&t.length>1&&(a=new URLSearchParams(t[1]))),(i=a===null||a===void 0?void 0:a.get(n))===null||i===void 0?void 0:i.trim()}catch(u){return null}}function ui(){switch(_mobIconConfig.Type){case o.MiniRewards:f=y(_mobIconConfig.IsCN?i.Mini_Rewards_CN:i.Mini_Rewards);break;case o.MiniPrivate:f=y(_mobIconConfig.IsCN?i.Mini_Private_CN:i.Mini_Private);break;case o.LargePrivate:f=y(_mobIconConfig.IsCN?i.Large_Private_CN:i.Large_Private);break;case o.LargeImageCreator:f=y(i.Large_ImageCreator);break;default:var n=_mobIconConfig.IsCN?i.Large_Rewards_CN:_mobIconConfig.IsMSA?i.Large_Rewards_MSA:i.Large_Rewards;f=y(n)}l="/header/mobupsellfly?customtype=".concat(bt,"&qrgen=").concat(_mobIconConfig.EnableQrGen?1:0,"&cn=").concat(_mobIconConfig.IsCN?1:0,"&msa=").concat(_mobIconConfig.IsMSA?1:0)}function y(n){var i,t;return u=n,i="".concat(_mobIconConfig.LPPre,"at=").concat(n),_mobIconConfig.NeedQuery&&(t=ri("q"),t||(t=_mobIconConfig.FallbackQuery),t&&(i+="&q=".concat(t))),i}function fi(n,t){var r,i;return(t===void 0&&(t=0),i=(r=_w.localStorage)===null||r===void 0?void 0:r.getItem(n),i&&i.length)?parseInt(i):t}function ei(){ot()?ct("Overlap"):Log.Log(s,u,tt,!1,"reason","Init");ui();gt();hi()}function oi(){sj_be(_d,"click",e);sj_be(_w,"keydown",st);p&&sj_be(p,"click",e);w&&sj_be(w,"click",e);b&&sj_be(b,"click",e)}function si(){sj_ue(_d,"click",e);sj_ue(_d,"keydown",st);p&&sj_ue(p,"click",e);w&&sj_ue(w,"click",e);b&&sj_ue(b,"click",e);t&&sj_ue(t,"click",vt);t&&sj_ue(t,"keypress",at);t&&sj_ue(t,"keydown",k);r&&sj_ue(r,"keydown",k)}function at(){n&&n.focus();h("KeypressClose")}function vt(n){n.stopPropagation();h("ClickClose")}function hi(){sj_be(n,"click",function(n){Log.Log("Click","MobileIcon","HeaderMobileIcon_Clicked");l&&l.length&&(n===null||n===void 0?void 0:n.preventDefault());n===null||n===void 0?void 0:n.stopPropagation();v?h("ClickMobileIcon"):(Log.Log(s,u,yt),lt("ClickMobileIcon"),c&&c.classList.add("b_hide"),ii(it))})}function ci(){t=_ge("id_mobpopclose");r=_ge("id_mobpopcta");var n=_ge("id_mobpopcntr");t&&sj_be(t,"click",vt);r&&sj_be(r,"click",function(n){return ht(n)});n&&sj_be(n,"click",function(n){return ht(n)});t&&sj_be(t,"keypress",at);t&&sj_be(t,"keydown",k);r&&sj_be(r,"keydown",k)}function k(n){if(n.key==="Tab"){var u=_qs(":focus"),i;u==t?i=r:u==r&&(i=t);i&&(n.preventDefault(),i.focus())}}var o;(function(n){n[n.MiniRewards=0]="MiniRewards";n[n.MiniPrivate=1]="MiniPrivate";n[n.LargeRewards=2]="LargeRewards";n[n.LargePrivate=3]="LargePrivate";n[n.LargeImageCreator=4]="LargeImageCreator"})(o||(o={}));typeof _mobIconConfig=="undefined"&&(_mobIconConfig={Type:o.LargeRewards,EnableQrGen:!1,QrSize:84,IsCN:!1,IsMSA:!1,LPPre:"https://aka.ms/salp?",NeedQuery:!1});var i={OneM_T1:"1e4n8naa_1eo6jrog",OneM_T2:"1eichvfu_1e56jkx9",Mini_Rewards:"1ip3w5h0_1iztihn1",Mini_Rewards_CN:"1ice8eec_1ix3hkzz",Mini_Private:"1im4ss90_1io78j7q",Mini_Private_CN:"1ixkx3wx_1i51oyh9",Large_Rewards:"14utojb6_14yb1dlu",Large_Rewards_CN:"1dx1grbe_1dpg8ipe",Large_Rewards_MSA:"1iarelf0_1iddhem4",Large_Private:"1ii5f4ns_1ik8xdqj",Large_Private_CN:"1ilwor7a_1ibzkr0a",Large_ImageCreator:"153yafkj_15at5xma"},s="OpalUpsell",tt="Show",yt="Click",pt=50,wt=7,it="MOBILE_ICON_CLICK_DT",n=_ge("id_mobile"),c=n?_qs("circle",n):null,p=_qs("#id_l"),w=_qs("#id_rh"),d=_qs("#id_h"),g=_qs("#sb_form"),nt=_qs("#b_header"),b=_qs("#id_sc"),rt=_ge("b_sh_btn"),ut=0;rt&&(ut=rt.offsetWidth+16);var u="",bt=_mobIconConfig.Type,f="",l="",a=null,v=!1,ft=!1,et=!1,t,r;sj_evt.bind("bnp.embed.ready",function(n){var i=n[0],t=n[1];t.tar&&h("BnpConflictDetected")});sj_be(_w,"resize",kt);ei()})(MobileIcon||(MobileIcon={}))